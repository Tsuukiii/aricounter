<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MONTREAL DUTY FREE — Cash Counter</title>

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css?v=20250822" />

  <!-- MSAL (Microsoft sign-in, PKCE) -->
  <script src="https://alcdn.msauth.net/browser/2.38.2/js/msal-browser.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <header class="app-header">
    <div class="branding-left">
      <button id="helpBtn" class="btn ghost">Help</button>

      <div class="branding">
        <div class="logo-image">
          <img src="montreallogo.png" alt="Montreal Duty Free Logo">
        </div>
        <div>
          <h1>MONTREAL DUTY FREE</h1>
          <p class="subtitle">AerRianta Intl NA</p>
        </div>
      </div>

      <div class="header-actions">
        <button id="contrastToggle" class="btn ghost" aria-pressed="false">High Contrast</button>
        <button id="langToggle" class="btn ghost">FR</button>
        <button id="printBtn" class="btn secondary">Print</button>
        <button id="openSharePointBtn" class="btn sharepoint">Open SharePoint Folder</button>
        <button id="shareToSPBtn" class="btn sharepoint">Share to SharePoint</button>
      </div>
    </div>
  </header>

  <div id="statusLive" class="sr-only" aria-live="polite"></div>

  <main class="container">
    <!-- Session Info -->
    <section class="card" aria-labelledby="sessionTitle">
      <h2 id="sessionTitle">Session Info</h2>
      <div class="grid">
        <label class="field" id="f-cashierName">
          <span>Head Cashier/Manager Name</span>
          <input id="cashierName" type="text" placeholder="Your full name" aria-describedby="err-cashierName" />
          <small id="err-cashierName" class="error" aria-hidden="true"></small>
        </label>
        <label class="field" id="f-countDate">
          <span>Date</span>
          <input id="countDate" type="date" aria-describedby="err-countDate" />
          <small id="err-countDate" class="error" aria-hidden="true"></small>
        </label>
        <label class="field">
          <span>Store</span>
          <select id="store">
            <option>International</option>
            <option>Transborder</option>
            <option>Jetty</option>
            <option>Value</option>
          </select>
        </label>
        <label class="field">
          <span>Cashiers (who used the cash)</span>
          <input id="cashiersList" type="text" placeholder="Comma-separated e.g., Samira, Alex" />
        </label>
        <label class="field">
          <span>Cash Number</span>
          <input id="cashNumber" type="text" placeholder="e.g., Cash #1" />
        </label>
      </div>
    </section>

    <!-- Denominations -->
    <section class="card" aria-labelledby="denomsTitle">
      <div class="card-header">
        <h2 id="denomsTitle">Denominations</h2>
        <div class="row gap">
          <label class="toggle"><input type="checkbox" id="enableCAD" checked> <span>CAD</span></label>
          <label class="toggle"><input type="checkbox" id="enableUSD"> <span>USD</span></label>
          <label class="toggle"><input type="checkbox" id="enableEUR"> <span>EUR</span></label>
        </div>
      </div>
      <div id="denomSections" class="denom-wrapper"></div>
      <small class="hint">Quantities must be between 0 and 10,000.</small>
    </section>

    <!-- Totals -->
    <section class="card" aria-labelledby="totalsTitle">
      <h2 id="totalsTitle">Totals</h2>
      <div class="totals-grid">
        <div class="tot">
          <span>CAD Counted</span>
          <strong id="cadTotal">0.00</strong>
          <label class="field compact">
            <span>CAD Reported (Z report)</span>
            <input id="reportedCAD" type="number" step="0.01" placeholder="0.00" />
          </label>
          <label class="field compact">
            <span>CAD Lost Change (&lt; $5)</span>
            <input id="lostChangeCAD" type="number" step="0.01" placeholder="0.00" />
          </label>
          <div class="field compact">
            <span>CAD Difference (Counted − Reported)</span>
            <strong id="cadDiff" class="diff">0.00</strong>
          </div>
        </div>

        <div class="tot">
          <span>USD Counted</span>
          <strong id="usdTotal">0.00</strong>
          <label class="field compact">
            <span>USD Reported (Z report)</span>
            <input id="reportedUSD" type="number" step="0.01" placeholder="0.00" />
          </label>
          <div class="field compact">
            <span>USD Difference (Counted − Reported)</span>
            <strong id="usdDiff" class="diff">0.00</strong>
          </div>
        </div>

        <div class="tot">
          <span>EUR Counted</span>
          <strong id="eurTotal">0.00</strong>
          <label class="field compact">
            <span>EUR Reported (Z report)</span>
            <input id="reportedEUR" type="number" step="0.01" placeholder="0.00" />
          </label>
          <div class="field compact">
            <span>EUR Difference (Counted − Reported)</span>
            <strong id="eurDiff" class="diff">0.00</strong>
          </div>
        </div>

        <div class="tot">
          <label class="field compact">
            <span>Card Difference (info only)</span>
            <input id="cardDifference" type="number" step="0.01" placeholder="0.00" />
          </label>
        </div>

        <div class="tot">
          <span>Reconciled Difference (CAD + USD + EUR)</span>
          <strong id="recDiff" class="diff">0.00</strong>
        </div>
      </div>
    </section>

    <!-- Deposits -->
    <section class="card" aria-labelledby="depositsTitle">
      <div class="card-header">
        <h2 id="depositsTitle">Deposits</h2>
        <div class="row right">
          <button id="depositBtn" class="btn">+ Deposit</button>
        </div>
      </div>
      <div id="depositsList" class="deposits-list empty" aria-live="polite"></div>
    </section>

    <!-- Actions -->
    <section class="card actions">
      <button id="resetBtn" class="btn danger">Reset</button>
      <button id="exportCsvBtn" class="btn" disabled>Export CSV</button>
      <button id="exportPdfBtn" class="btn primary" disabled>Export PDF</button>
      <button id="openSharePointBtn2" class="btn sharepoint">Open SharePoint Folder</button>
    </section>

    <div class="sticky-summary" aria-live="polite">
      <div><strong>Total Counted:</strong> <span id="summaryCounted">0.00</span></div>
      <div><strong>Reconciled Difference:</strong> <span id="summaryRecDiff">0.00</span></div>
    </div>
  </main>

  <footer class="footer">
    <small>© <span id="year"></span> MONTREAL DUTY FREE — Internal tool prototype · v2025.08.22</small>
  </footer>

  <script src="app.js?v=20250822"></script>
  <!-- Help modal -->
<div id="helpModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="helpTitle" aria-modal="true">
  <div class="modal-backdrop" data-close="true"></div>
  <div class="modal-panel" tabindex="-1">
    <div class="modal-header">
      <h3 id="helpTitle">How to use this app</h3>
      <button id="helpClose" class="btn ghost" aria-label="Close">×</button>
    </div>

    <ol id="helpList" class="modal-body">
      <!-- Content is injected from app.js (I18N.helpListHtml) -->
    </ol>

    <div class="modal-footer">
      <button id="helpOk" class="btn primary">Got it</button>
    </div>
  </div>
</div>

</body>
</html>
