:root{
  --bg: #0b0b0b;
  --card: #1a1a1a;
  --muted: #cccccc;
  --text: #ffffff;
  --accent: #ff9800;
  --accent-2: #ffcc80;
  --danger: #ef4444;
  --ring: rgba(255, 152, 0, 0.5);

  /* High-contrast overrides will switch these */
  --hc-bg: #000000;
  --hc-card: #0e0e0e;
  --hc-text: #ffffff;
  --hc-accent: #ffd000;
  --hc-border: #ffffff;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 600px at 20% -10%, #1a1a1a 0%, #0b0b0b 50%, #000000 100%);
  color:var(--text);
}

body.hc{
  background: var(--hc-bg);
  color: var(--hc-text);
}
body.hc .card{
  border-color: var(--hc-border);
}
body.hc .btn{ color:#000; background: var(--hc-accent); }
body.hc .btn.ghost{ color: var(--hc-text); border-color: var(--hc-border); background: transparent; }

@media (prefers-reduced-motion: reduce){
  *{ transition:none !important; animation:none !important; }
}
body.reduce-motion *{ transition:none !important; animation:none !important; }

.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

.app-header{
  padding:16px 20px;
  border-bottom:1px solid rgba(255,255,255,.06);
  position:sticky;top:0;z-index:10;
  background:rgba(0,0,0,.8);
  backdrop-filter: blur(8px);
}

.branding-left{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
}

.branding{display:flex;gap:12px;align-items:center}
.subtitle{margin:0;color:var(--muted);font-size:12px}

.header-actions{
  display:flex;
  align-items:center;
  gap:8px;
}

.container{max-width:980px;margin:28px auto;padding:0 16px}

.card{
  background:linear-gradient(180deg, rgba(255,255,255,.05), transparent 30%) border-box;
  border:1px solid rgba(255,255,255,.08);
  padding:18px;border-radius:16px;margin-bottom:18px;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}
.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.field{display:flex;flex-direction:column;gap:6px}
.field input,.field select{
  background:#111;border:1px solid rgba(255,255,255,.1);
  color:var(--text);padding:10px 12px;border-radius:10px;outline:none;
}
.field input:focus-visible,.field select:focus-visible{border-color:var(--accent);box-shadow:0 0 0 3px var(--ring); outline: 2px solid transparent;}
.field.compact input{margin-top:6px}
.field .error{color:#ff6b6b; min-height: 16px;}
.field .hint{color:var(--muted);font-size:12px}

.btn{
  appearance:none;border:none;padding:10px 14px;border-radius:12px;
  color:#000;background:var(--accent);font-weight:700;cursor:pointer;
  transition:.2s transform,.2s opacity;
}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn.primary{background:var(--accent)}
.btn.secondary{background:var(--accent-2)}
.btn.danger{background:var(--danger);color:white}
.btn.ghost{background:transparent;color:var(--text);border:1px dashed rgba(255,255,255,.2)}

.row{display:flex;align-items:center}
.row.right{justify-content:flex-end}
.gap{gap:12px}

.toggle{display:flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid rgba(255,255,255,.1);border-radius:999px;background:#111}
.toggle input{accent-color:var(--accent)}

.denom-wrapper{display:grid;gap:18px}
.denom-section{border-top:1px dashed rgba(255,255,255,.12);padding-top:12px}
.denom-title{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.denom-grid{display:grid;grid-template-columns: 1fr 1fr 1fr 1fr;gap:8px;align-items:end}
.denom-grid .head{color:var(--muted);font-size:12px}
.cell input{
  width:100%;background:#111;border:1px solid rgba(255,255,255,.1);
  color:var(--text);padding:8px;border-radius:8px;outline:none;
}
.cell input:focus-visible{border-color:var(--accent);box-shadow:0 0 0 3px var(--ring)}
.cell .readonly{opacity:.8}
input[readonly]{pointer-events:none;user-select:text;opacity:0.9}

/* Totals */
.totals-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
.tot{display:flex;flex-direction:column;gap:6px;background:#111;border:1px solid rgba(255,255,255,.1);padding:12px;border-radius:12px}
.tot strong{font-size:20px}

/* Diff colors */
.diff.ok{color:#1a7f37}
.diff.warn{color:#b54708}
.diff.err{color:#b42318}

/* Sticky summary */
.sticky-summary{
  position:sticky; bottom:8px; z-index:5;
  background:rgba(17,17,17,.9);
  border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:10px 12px;
  display:flex; gap:18px; justify-content:flex-start;
  backdrop-filter:blur(6px);
}

/* Footer */
.footer{max-width:980px;margin:20px auto;padding:0 16px;color:var(--muted)}

/* Logo */
.logo-image { width: 70px; height: 70px; border-radius: 50%; overflow: hidden; background: var(--accent); display: flex; align-items: center; justify-content: center; }
.logo-image img { width: 100%; height: 100%; object-fit: cover; display: block; }

/* SharePoint button: darker orange */
.btn.sharepoint{ background:#cc7a00; color:white; }
.btn.sharepoint:hover{ background:#b36800; }

/* Help button spacing */
#helpBtn{ margin-right:16px; }

/* ==== Modals (Help & Deposit) ==== */
.modal{position:fixed;inset:0;display:none;z-index:1000}
.modal[aria-hidden="false"]{display:block}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.6);backdrop-filter: blur(4px);}
.modal-panel{
  position:relative;max-width:720px;width:calc(100% - 32px);
  margin:8vh auto 0 auto;
  background:#141414;border:1px solid rgba(255,255,255,.08);
  border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.5);
  outline:none;
}
.modal-header, .modal-footer{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.modal-footer{border-top:1px solid rgba(255,255,255,.08);border-bottom:none}
.modal-header{display:flex;align-items:center;justify-content:space-between}
.modal-header h3{margin:0;font-size:1.1rem}
.modal-body{padding:16px;max-height:62vh;overflow:auto}
.help-steps{margin:0 0 8px 18px;padding:0;line-height:1.6}
.help-steps li{margin:6px 0}
.help-steps strong{color:var(--accent)}
.btn.small{padding:6px 10px;border-radius:10px;font-weight:600}

/* Deposits list */
.deposits-list.empty::after{
  content:"No deposits yet.";
  color:var(--muted);
}
.deposit-item{
  display:grid; grid-template-columns: 1fr auto; align-items:center;
  border:1px solid rgba(255,255,255,.1); border-radius:10px; padding:10px; margin-bottom:8px; background:#111;
}
.deposit-meta{font-size:14px}
.deposit-actions{position:relative}
.menu-btn{background:transparent;border:1px dashed rgba(255,255,255,.2);color:var(--text);padding:6px 10px;border-radius:8px;cursor:pointer}
.menu{position:absolute; right:0; top:40px; background:#181818; border:1px solid rgba(255,255,255,.15); border-radius:10px; padding:6px; display:none; min-width:140px; z-index:20;}
.menu.open{display:block}
.menu button{display:block; width:100%; text-align:left; background:transparent; border:0; color:var(--text); padding:8px 10px; border-radius:8px; cursor:pointer}
.menu button:hover{background:#222}



/* Basic modal styles (safe, minimal) */
.modal { position: fixed; inset: 0; display: none; z-index: 1000; }
.modal[aria-hidden="false"] { display: block; }
.modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.6); }
.modal-panel {
  position: relative; max-width: 720px; margin: 6vh auto; background: #111;
  color: #fff; padding: 24px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.4);
}
.modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
.modal-body { margin: 0; padding-left: 18px; }
.modal-body li { margin: 8px 0; }
.modal-footer { margin-top: 16px; text-align: right; }


@media (max-width:640px){
  .denom-grid{grid-template-columns: 1fr 1fr}
  .totals-grid{grid-template-columns:1fr}
}
@media print{
  body{background:white;color:black}
  .card{box-shadow:none;border:0}
  .no-print{display:none}
  .section{break-inside:avoid}
}
